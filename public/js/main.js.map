{"version":3,"sources":["app/app.module.js","app/app.routes.js","app/components/documents/documentsController.js","app/components/document/documentController.js","app/components/document/documentService.js","app/components/node/nodeChildDirective.js","app/components/node/nodeController.js","app/components/node/nodeDirective.js","app/components/node/nodeService.js","app/components/node/nodeTreeDirective.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AClBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACpFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AClCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"main.js","sourcesContent":["/** CV App Module */\n\nvar cvApp = angular.module('cvApp', ['ui.router']);\n\ncvApp.config(function($interpolateProvider) {\n    $interpolateProvider.startSymbol('[[');\n    $interpolateProvider.endSymbol(']]');\n});\n\ncvApp.filter('objOrder', function () {\n    return function(object) {\n        var array = [];\n        angular.forEach(object, function (value, key) {\n            array.push({key: key, value: value});\n        });\n        return array;\n    };\n});\n","/** Angular UI Routing Config */\n\ncvApp.config( function($stateProvider, $urlRouterProvider) {\n    $stateProvider\n        .state('document', {\n            url: '/',\n            controller: 'DocumentsController',\n            controllerAs : 'documentsCtrl',\n            templateUrl: 'documents/documents.html',\n            resolve: {\n                documents: function(DocumentService, documentsData){\n                    var documentResult = [];\n                    var documentsDataData = documentsData.data;\n                    for(documentName in documentsDataData){\n                        documentResult.push({\n                            name: documentName,\n                            data: documentsDataData[documentName]\n                        });\n                    }\n                    return documentResult;\n                },\n                documentsData: function(DocumentService){\n                    return DocumentService.getDocuments();\n                }\n            }\n        })\n        .state('document.new', {\n            url: 'new',\n            templateUrl: 'document/document-new.html',\n            controller: 'DocumentController',\n            controllerAs : 'documentCtrl',\n            resolve: {\n                documentName: function(){\n                    return '';\n                },\n                documentData: function(){\n                    return '';\n                }\n            }\n        })\n        .state('document.view', {\n            url: ':document_name',\n            views: {\n                '': {\n                    templateUrl: 'document/document-view.html'\n                },\n                'name@document.view': {\n                    templateUrl: 'document/document-name.html',\n                    controller: 'DocumentController',\n                    controllerAs : 'documentCtrl'\n                },\n                'data@document.view': {\n                    templateUrl: 'document/document-data.html',\n                    controller: 'DocumentController',\n                    controllerAs : 'documentCtrl'\n                }\n            },\n            resolve: {\n                documentName: function($stateParams){\n                    return $stateParams.document_name;\n                },\n                documentDataPromise: function($stateParams, DocumentService){\n                    return DocumentService.getDocument($stateParams.document_name);\n                },\n                documentTemplatesPromise: function($stateParams, DocumentService){\n                    return DocumentService.getDocument($stateParams.document_name+'-templates');\n                },\n                documentData: function(documentDataPromise, documentTemplatesPromise, DocumentService){\n                    // Preload the template cache with the templates for this document\n                    var documentTemplates = documentTemplatesPromise.data;\n                    DocumentService.preloadCache(documentTemplates);\n                    return documentDataPromise.data;\n                }\n            }\n        })\n        .state('.node', {\n            url: ':document_name/:path',\n            controller: 'NodeController',\n            controllerAs: 'nodeCtrl',\n            templateUrl: 'node/node.html'\n        });\n\n    $urlRouterProvider.otherwise(\"/\");\n});\n","/** Documents Controller */\n\ncvApp.controller('DocumentsController', ['documents',  function(documents){\n    var documentsCtrl = this;\n\n    this.documents = documents;\n\n}]);\n","/** Document Controller */\n\ncvApp.controller('DocumentController', ['DocumentService', 'documentName', 'documentData', '$state',  function(DocumentService, documentName, documentData, $state){\n    var documentCtrl = this;\n\n    this.document = {\n        name: documentName,\n        data: documentData\n    };\n\n    /**\n     * Create a document with the given name\n     *\n     * @param documentName\n     */\n    this.createDocument = function() {\n        var documentName = documentCtrl.document.name;\n        var documentData = documentCtrl.document.data;\n        DocumentService.createDocument(documentName, documentData).success(function(data){\n            documentCtrl.document = {\n                name: '',\n                data: ''\n            };\n        }).success(\n            function(){\n                $state.go('document', {}, {\n                    reload: true\n                });\n            }\n        );\n\n    }\n\n}]);\n","/**\n * Service to provide Document Data\n */\n\ncvApp.service('DocumentService', ['$http', '$templateCache', function($http, $templateCache) {\n    var documentService = this;\n\n    this.getDocuments = function () {\n        return $http.get('/api');\n    }\n\n    this.getDocument = function (documentName) {\n        return $http.get('/api/' + documentName);\n    }\n\n    this.createDocument = function (documentName, documentData) {\n        return $http.put('/api/' + documentName, documentData);\n    }\n\n    this.preloadCache = function(jsonData, path) {\n        // To start off, set the path to en empty string, and add the node-child template to the cache\n        if (typeof path == 'undefined'){\n            path = '';\n            $http.get('node/node-child.html').success(function(data){\n                $templateCache.put('node/node-child.html', data);\n            });\n        }\n        if( typeof jsonData == \"object\" ) {\n            $.each(jsonData, function(key,val) {\n                // if the key is template, add the value to the cache at this path\n                if (key == 'template'){\n                    $templateCache.put(path, val);\n                } else {\n                    documentService.preloadCache(val, String(path) + '/' + String(key));\n                }\n            });\n        }\n    }\n}]);\n\n","cvApp.directive('nodeChild', function() {\n    return {\n        templateUrl: 'node/node-child.html',\n        transclude: true,\n        replace: true,\n        restrict: 'E'\n    };\n});","/** Node Controller */\n\ncvApp.controller('NodeController', ['NodeService', 'nodeData', function(NodeService, nodeData){\n    var nodeCtrl = this;\n\n    this.nodeData = nodeData;\n}]);\n","\ncvApp.directive('node', ['$compile', '$templateCache', function($compile, $templateCache) {\n    return {\n        replace: true,\n        restrict: 'E',\n        template: '<div ng-include=\"getTemplateUrl()\"></div>',\n        link: function($scope, elm) {\n            var grandparentNodePath = $scope.$parent.$parent.nodePath;\n            if (typeof grandparentNodePath == 'undefined'){\n                grandparentNodePath = '';\n            }\n            $scope.nodePath = grandparentNodePath + '/' + $scope.nodeKey;\n            // Define dynamic template function\n            $scope.getTemplateUrl = function(){\n                // Try the exact path\n                if ($templateCache.get(this.nodePath)){\n                    return this.nodePath;\n                }\n                // If the path ends with a number, try the default (\"_\")\n                var defaultPath = this.nodePath.replace(/\\/\\d+$/, '/_');\n                if (defaultPath != this.nodePath && $templateCache.get(defaultPath)){\n                    return defaultPath;\n                }\n                return 'node/node.html';\n            };\n            // Assign helper functions\n            $scope.isNumber = angular.isNumber;\n            $scope.isCollection = function(item){\n                return angular.isArray(item) || angular.isObject(item);\n            }\n        }\n    };\n}]);","/**\n * Service to provide Node Data\n */\n\ncvApp.service('NodeService', ['$http', function($http) {\n    this.getNode = function (documentName, nodePath) {\n        // Remove any leading slash from path\n        nodePath = nodePath.replace(/^\\//, '');\n        return $http.get('/api/' + documentName + '/' + nodePath);\n    }\n    this.getNodeTemplate = function (documentName, nodePath) {\n        // Remove any leading slash from path\n        nodePath = nodePath.replace(/^\\//, '');\n        return $http.get('/api/' + documentName + '-templates/' + nodePath);\n    }\n}]);\n","cvApp.directive('nodeTree', function() {\n    return {\n        templateUrl: 'node/node-tree.html',\n        transclude: true,\n        replace: true,\n        restrict: 'E',\n        scope: {\n            node: '=',\n            nodePath: '@'\n        }\n    };\n});"],"sourceRoot":"/source/"}